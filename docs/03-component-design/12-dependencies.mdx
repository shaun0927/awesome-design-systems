---
title: "Dealing with Dependencies Inside Design Systems"
sidebar_label: "ì˜ì¡´ì„± ê´€ë¦¬"
sidebar_position: 12
audience: developer
tags: [dependencies, versioning, architecture, release, monorepo]
---

import DevQuickStart from '@site/src/components/DevQuickStart';

<DevQuickStart
  what="Component dependency chains determine your build order, release strategy, and the blast radius of every change"
  learn="How to manage dependencies with peerDependencies, monorepo tooling, and automated dependency graphs"
  able="Set up a monorepo with proper dependency tracking and automated versioning using Changesets"
/>

## ì˜ì¡´ì„± ì²´ì¸ ì´í•´

ë””ìì¸ ì‹œìŠ¤í…œì—ì„œ ì»´í¬ë„ŒíŠ¸ëŠ” ì„œë¡œ ì˜ì¡´í•©ë‹ˆë‹¤. Iconì„ ë³€ê²½í•˜ë©´ Button, Checkbox, Select, Alert ë“± ëª¨ë“  ì˜ì¡´ ì»´í¬ë„ŒíŠ¸ì— ì˜í–¥ì„ ë¯¸ì¹©ë‹ˆë‹¤.

```mermaid
graph TD
    Icon["Icon<br/>62 dependents"] --> Button["Button<br/>42 dependents"]
    Icon --> Checkbox
    Icon --> Select
    Icon --> Alert
    Button --> Card
    Button --> Modal
    Button --> Toolbar
    Tooltip --> Popover
    Popover --> Menu
    ListGroup["List Group"] --> Menu

    style Icon fill:#fee2e2,stroke:#dc2626
    style Button fill:#fef3c7,stroke:#d97706
    style Card fill:#d1fae5,stroke:#059669
    style Modal fill:#d1fae5,stroke:#059669
```

### ì˜ì¡´ì„± ë ˆë²¨

| Level | ì˜ˆì‹œ | Dependents | ë³€ê²½ ìœ„í—˜ë„ |
|-------|------|------------|------------|
| **1 (Foundation)** | Icon, Token | 60+ | Very High |
| **2 (Core)** | Button, Avatar, Input | 20-40 | High |
| **3 (Composite)** | Menu, Popover, Modal | 5-15 | Medium |
| **4 (Pattern)** | Card Grid, Toolbar | 0-5 | Low |

## npm peerDependencies ì „ëµ

ë””ìì¸ ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ì—ì„œ peerDependenciesë¥¼ ì‚¬ìš©í•˜ë©´ ë²„ì „ ì¶©ëŒì„ ë°©ì§€í•˜ê³  ë²ˆë“¤ í¬ê¸°ë¥¼ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### íŒ¨í‚¤ì§€ êµ¬ì¡°

```json title="packages/button/package.json"
{
  "name": "@myds/button",
  "version": "2.1.0",
  "peerDependencies": {
    "react": "^18.0.0 || ^19.0.0",
    "@myds/icon": "^3.0.0",
    "@myds/tokens": "^1.0.0"
  },
  "devDependencies": {
    "@myds/icon": "^3.2.0",
    "@myds/tokens": "^1.4.0"
  }
}
```

```json title="packages/modal/package.json"
{
  "name": "@myds/modal",
  "version": "1.5.0",
  "peerDependencies": {
    "react": "^18.0.0 || ^19.0.0",
    "@myds/button": "^2.0.0",
    "@myds/icon": "^3.0.0",
    "@myds/tokens": "^1.0.0"
  },
  "dependencies": {
    "@myds/focus-trap": "^1.0.0"
  }
}
```

### ì–¸ì œ ì–´ë–¤ dependency íƒ€ì…ì„ ì‚¬ìš©í•˜ë‚˜?

| íƒ€ì… | ì‚¬ìš© ì‹œì  | ì˜ˆì‹œ |
|------|----------|------|
| `peerDependencies` | ì†Œë¹„ìê°€ ì´ë¯¸ ì„¤ì¹˜í•œ íŒ¨í‚¤ì§€ | React, ë‹¤ë¥¸ DS ì»´í¬ë„ŒíŠ¸ |
| `dependencies` | ë‚´ë¶€ ìœ í‹¸ë¦¬í‹°, ì†Œë¹„ìì—ê²Œ ë…¸ì¶œ ì•ˆ ë¨ | focus-trap, class-variance-authority |
| `devDependencies` | ë¹Œë“œ/í…ŒìŠ¤íŠ¸ ì „ìš© | TypeScript, Jest, Storybook |

## ëª¨ë…¸ë ˆí¬ ì„¤ì •

### Turborepo êµ¬ì„±

```json title="turbo.json"
{
  "$schema": "https://turbo.build/schema.json",
  "tasks": {
    "build": {
      "dependsOn": ["^build"],
      "outputs": ["dist/**"]
    },
    "test": {
      "dependsOn": ["^build"]
    },
    "lint": {}
  }
}
```

`"dependsOn": ["^build"]`ëŠ” íŒ¨í‚¤ì§€ì˜ ì˜ì¡´ì„±ì´ ë¨¼ì € ë¹Œë“œë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. Iconì´ ë¨¼ì € ë¹Œë“œë˜ê³ , ê·¸ ë‹¤ìŒ Button, ê·¸ ë‹¤ìŒ Modal ìˆœì„œì…ë‹ˆë‹¤.

### ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
design-system/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ tokens/          # Foundation - ê°€ì¥ ë¨¼ì € ë¹Œë“œ
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”œâ”€â”€ icon/            # Level 1
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”œâ”€â”€ button/          # Level 2 - depends on icon, tokens
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”œâ”€â”€ modal/           # Level 3 - depends on button, icon
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â””â”€â”€ react/           # Meta-package (re-exports all)
â”‚       â””â”€â”€ package.json
â”œâ”€â”€ turbo.json
â”œâ”€â”€ package.json
â””â”€â”€ pnpm-workspace.yaml
```

```yaml title="pnpm-workspace.yaml"
packages:
  - 'packages/*'
```

## Changesetsë¥¼ ì‚¬ìš©í•œ ìë™ ë²„ì „ ê´€ë¦¬

[Changesets](https://github.com/changesets/changesets)ëŠ” ë³€ê²½ ì‚¬í•­ì„ ì¶”ì í•˜ê³  ìë™ìœ¼ë¡œ ë²„ì „ì„ ì¦ê°€ì‹œí‚µë‹ˆë‹¤.

### ì„¤ì¹˜ ë° ì´ˆê¸°í™”

```bash
pnpm add -Dw @changesets/cli
pnpm changeset init
```

### ë³€ê²½ ì‚¬í•­ ê¸°ë¡

Icon ì»´í¬ë„ŒíŠ¸ë¥¼ ìˆ˜ì •í–ˆë‹¤ë©´:

```bash
pnpm changeset
```

```markdown title=".changeset/cool-tigers-fly.md"
---
"@myds/icon": minor
---

Added new `ChevronDown` icon variant for dropdown indicators.
```

### ì˜ì¡´ì„± ì²´ì¸ ìë™ ë²„ì „ ì—…ë°ì´íŠ¸

ChangesetsëŠ” ì˜ì¡´í•˜ëŠ” íŒ¨í‚¤ì§€ì˜ ë²„ì „ë„ ìë™ìœ¼ë¡œ ì˜¬ë¦½ë‹ˆë‹¤.

```bash
pnpm changeset version
```

ê²°ê³¼:
- `@myds/icon`: 3.2.0 -> 3.3.0 (minor - ìƒˆ ê¸°ëŠ¥)
- `@myds/button`: 2.1.0 -> 2.1.1 (patch - dependency update)
- `@myds/modal`: 1.5.0 -> 1.5.1 (patch - dependency update)

### Breaking Change ì „íŒŒ ê·œì¹™

Iconì´ breaking change(major)ë¥¼ ë°œìƒì‹œì¼œë„, ì˜ì¡´í•˜ëŠ” ëª¨ë“  íŒ¨í‚¤ì§€ê°€ majorì¼ í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤.

```markdown title="When icon has a breaking change"
@myds/icon:   3.x.x â†’ 4.0.0  (MAJOR - API changed)
@myds/button: 2.x.x â†’ 2.2.0  (MINOR - adapts to new icon API internally)
@myds/modal:  1.x.x â†’ 1.5.1  (PATCH - no API change for modal consumers)
```

í•µì‹¬: ì†Œë¹„ìì˜ APIê°€ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë©´ patch/minorë¡œ ì¶©ë¶„í•©ë‹ˆë‹¤.

## ì˜ì¡´ì„± ì‹œê°í™”

### ìŠ¤í¬ë¦½íŠ¸ë¡œ ì˜ì¡´ì„± ê·¸ë˜í”„ ìƒì„±

```typescript title="scripts/dependency-graph.ts"
import { readFileSync, readdirSync } from 'fs';
import { join } from 'path';

interface PackageInfo {
  name: string;
  peerDependencies?: Record<string, string>;
  dependencies?: Record<string, string>;
}

function buildDependencyGraph(packagesDir: string) {
  const packages = readdirSync(packagesDir);
  const graph: Record<string, string[]> = {};

  for (const pkg of packages) {
    const pkgJsonPath = join(packagesDir, pkg, 'package.json');
    const pkgJson: PackageInfo = JSON.parse(
      readFileSync(pkgJsonPath, 'utf-8')
    );

    const deps = {
      ...pkgJson.peerDependencies,
      ...pkgJson.dependencies,
    };

    const internalDeps = Object.keys(deps || {}).filter((d) =>
      d.startsWith('@myds/')
    );

    graph[pkgJson.name] = internalDeps;
  }

  return graph;
}

function getDependents(
  graph: Record<string, string[]>,
  packageName: string
): string[] {
  return Object.entries(graph)
    .filter(([, deps]) => deps.includes(packageName))
    .map(([name]) => name);
}

// Usage: "What breaks if I change @myds/icon?"
const graph = buildDependencyGraph('./packages');
const affected = getDependents(graph, '@myds/icon');
console.log('Affected packages:', affected);
// â†’ ["@myds/button", "@myds/checkbox", "@myds/select", "@myds/alert", ...]
```

## ì‹œìŠ¤í…œ ì „ì²´ ì˜ì¡´ì„± íë¦„

ì»´í¬ë„ŒíŠ¸ ì™¸ì—ë„ ë¹Œë“œ ë„êµ¬, í† í°, ë¬¸ì„œ ì‚¬ì´íŠ¸ ê°„ì˜ ì˜ì¡´ì„±ì´ ìˆìŠµë‹ˆë‹¤.

```mermaid
graph LR
    A[Build Tooling<br/>webpack, tsconfig] --> B[Design Tokens<br/>JSON â†’ CSS]
    B --> C[UI Components<br/>React/Vue/Web Components]
    C --> D[Doc Components<br/>CodeBlock, PropTable]
    D --> E[Documentation Site<br/>Storybook, Docusaurus]

    style A fill:#f3e8ff,stroke:#7c3aed
    style B fill:#fef3c7,stroke:#d97706
    style C fill:#dbeafe,stroke:#2563eb
    style D fill:#d1fae5,stroke:#059669
    style E fill:#fee2e2,stroke:#dc2626
```

## ì˜ì¡´ì„± ê´€ë¦¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ëª¨ë“  ë‚´ë¶€ íŒ¨í‚¤ì§€ ê°„ ì˜ì¡´ì„±ì„ `peerDependencies`ë¡œ ì„ ì–¸
- [ ] Turborepo ë˜ëŠ” Nxë¡œ ë¹Œë“œ ìˆœì„œ ìë™ ê´€ë¦¬
- [ ] Changesetsë¡œ ë²„ì „ ê´€ë¦¬ ìë™í™”
- [ ] CIì—ì„œ `pnpm changeset status`ë¡œ changeset ëˆ„ë½ ì²´í¬
- [ ] ì˜ì¡´ì„± ê·¸ë˜í”„ ì‹œê°í™” ë„êµ¬ êµ¬ì¶• (ì˜í–¥ ë²”ìœ„ íŒŒì•…ìš©)
- [ ] Breaking change ì „íŒŒ ê·œì¹™ ë¬¸ì„œí™”

## ì°¸ê³  ìë£Œ

- Nathan Curtis, "Component Dependencies" (EightShapes, 2018)
- [Storybook Composition](https://storybook.js.org/docs/react/sharing/storybook-composition) â€” ì»´í¬ë„ŒíŠ¸ ì˜ì¡´ì„± ì‹œê°í™”
- [Nx Dependency Graph](https://nx.dev/core-features/explore-graph) â€” Monorepo ì˜ì¡´ì„± ê·¸ë˜í”„
- [Madge](https://github.com/pahen/madge) â€” JavaScript ì˜ì¡´ì„± ë¶„ì„ ë„êµ¬
- Robert C. Martin, "Clean Architecture" (2017) â€” ì˜ì¡´ì„± ê´€ë¦¬ ì›ì¹™
- [Atomic Design by Brad Frost](https://atomicdesign.bradfrost.com/) â€” ì»´í¬ë„ŒíŠ¸ ê³„ì¸µ ì´ë¡ 

> **ì‹¤ì œ ì‚¬ë¡€**: Shopify PolarisëŠ” npm íŒ¨í‚¤ì§€ë¥¼ `@shopify/polaris-tokens` â†’ `@shopify/polaris-icons` â†’ `@shopify/polaris` 3ê³„ì¸µìœ¼ë¡œ ë¶„ë¦¬í•˜ì—¬, í† í°ë§Œ í•„ìš”í•œ íŒ€ì€ ì „ì²´ ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤. ì´ëŠ” ë²ˆë“¤ í¬ê¸°ë¥¼ 90% ê°ì†Œì‹œì¼°ê³ , ë¹Œë“œ ì†ë„ë¥¼ 5ë°° í–¥ìƒì‹œì¼°ìŠµë‹ˆë‹¤.

> **ì‹¬í™” ì´ë¡ **: ì»´í¬ë„ŒíŠ¸ ì˜ì¡´ì„± ê´€ë¦¬ëŠ” **Acyclic Dependencies Principle**(ë¹„ìˆœí™˜ ì˜ì¡´ì„± ì›ì¹™)ì„ ë”°ë¼ì•¼ í•©ë‹ˆë‹¤. Button â†’ Icon â†’ Button ê°™ì€ ìˆœí™˜ ì°¸ì¡°ëŠ” ë¹Œë“œ ì‹¤íŒ¨, ë¬´í•œ ë£¨í”„, Tree-shaking ë¶ˆê°€ë¥¼ ì´ˆë˜í•©ë‹ˆë‹¤. ì˜ì¡´ì„± ë°©í–¥ì€ í•­ìƒ ë‹¨ë°©í–¥(Atoms â†’ Molecules â†’ Organisms)ì´ì–´ì•¼ í•˜ë©°, ì´ëŠ” Robert C. Martinì˜ "ì•ˆì •ëœ ì˜ì¡´ì„± ì›ì¹™"ì„ UIì— ì ìš©í•œ ê²ƒì…ë‹ˆë‹¤.

---

*ì¶œì²˜: Nathan Curtis (EightShapes)*
*Series: Releasing Design Systems #5 of 6*

---

## ğŸ“ Related Articles

import CrossRef from '@site/src/components/CrossRef';

<CrossRef
  related={[
    { path: "/docs/component-design/subcomponents", label: "Subcomponents - ì»´í¬ë„ŒíŠ¸ ë¶„í•´ ì „ëµ" },
    { path: "/docs/design-tokens/token-taxonomy", label: "Token Taxonomy - Audit to Implementation" },
    { path: "/docs/versioning-releases/versioning", label: "ë²„ì €ë‹ ê¸°ì´ˆ" },
  ]}
/>
